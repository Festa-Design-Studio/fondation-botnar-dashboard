<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Table Components - Organisms | Fondation Botnar Design System</title>
    <meta name="description" content="Advanced data table organisms with sorting, filtering, pagination, and virtual scrolling capabilities for complex data management">
    
    <!-- Botnar Design System CSS -->
    <link rel="stylesheet" href="../../../dist/botnar-design-system.css">
    
    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Prism.js for code highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</head>

<body class="h-full bg-gray-50 dark:bg-gray-900" x-data="dataTablesDemo()">
    <!-- Skip to content link -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-botnar-blue-500 text-white px-4 py-2 rounded-md z-50">
        Skip to main content
    </a>
    
    <div class="min-h-full">
        <!-- Header -->
        <header class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
            <div class="max-w-7xl mx-auto px-6">
                <div class="flex items-center justify-between h-16">
                    <!-- Breadcrumb Navigation -->
                    <nav class="flex items-center space-x-4" aria-label="Breadcrumb">
                        <a href="../../../index.html" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">Design System</a>
                        <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        <a href="../../index.html" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">Organisms</a>
                        <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="text-botnar-pink-600 dark:text-botnar-pink-400 font-medium">Data Tables</span>
                    </nav>
                    
                    <!-- Theme Toggle -->
                    <button @click="toggleTheme()" 
                            class="p-2 rounded-md bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"
                            :title="'Switch to ' + (theme === 'dark' ? 'light' : 'dark') + ' mode'">
                        <svg x-show="theme === 'light'" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                        </svg>
                        <svg x-show="theme === 'dark'" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main id="main-content" class="max-w-7xl mx-auto px-6 py-8">
            
            <!-- Page Header -->
            <div class="mb-12">
                <div class="mb-8">
                    <h1 class="text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4">Data Table Components</h1>
                    <p class="text-xl text-gray-600 dark:text-gray-300 mb-6 max-w-3xl">
                        Advanced data table organisms with sophisticated sorting, filtering, pagination, and virtual scrolling capabilities designed for complex data management in the Fondation Botnar dashboard ecosystem.
                    </p>
                    
                    <!-- Component Status -->
                    <div class="flex flex-wrap gap-3 mb-6">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400">
                            âœ… Production Ready
                        </span>
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400">
                            ðŸ”§ Interactive
                        </span>
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400">
                            â™¿ WCAG AA
                        </span>
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400">
                            ðŸ“± Responsive
                        </span>
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400">
                            âš¡ Virtual Scrolling
                        </span>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="flex flex-col sm:flex-row gap-4">
                        <button @click="showCode = !showCode" class="btn btn-primary">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                            </svg>
                            <span x-text="showCode ? 'Hide Code' : 'View Code'"></span>
                        </button>
                        <button @click="resetDemo()" class="btn btn-secondary">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                            Reset Demo
                        </button>
                        <button @click="generateSampleData()" class="btn btn-secondary">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                            Generate Data
                        </button>
                    </div>
                </div>
            </div>

            <!-- Table Type Selector -->
            <section class="mb-8">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4">Table Variants</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <template x-for="tableType in tableTypes" :key="tableType.id">
                        <button @click="selectedTableType = tableType.id; initializeTable()" 
                                class="p-4 rounded-lg border-2 text-left transition-all"
                                :class="selectedTableType === tableType.id ? 
                                    'border-botnar-pink-500 bg-botnar-pink-50 dark:bg-botnar-pink-900/20 dark:border-botnar-pink-400' : 
                                    'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-gray-800'">
                            <div class="flex items-center mb-2">
                                <div class="w-8 h-8 rounded-lg flex items-center justify-center mr-3"
                                     :class="tableType.color">
                                    <span x-html="tableType.icon"></span>
                                </div>
                                <h3 class="font-semibold text-gray-900 dark:text-gray-100" x-text="tableType.name"></h3>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400" x-text="tableType.description"></p>
                        </button>
                    </template>
                </div>
            </section>

            <!-- Table Controls -->
            <section class="mb-6">
                <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
                        <!-- Search and Filters -->
                        <div class="flex flex-col sm:flex-row gap-4 flex-1">
                            <!-- Global Search -->
                            <div class="flex-1 max-w-md">
                                <label for="global-search" class="sr-only">Search all data</label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                        </svg>
                                    </div>
                                    <input id="global-search" 
                                           x-model="searchQuery" 
                                           @input.debounce.300ms="performSearch()"
                                           type="text" 
                                           placeholder="Search all data..." 
                                           class="form-input pl-10">
                                </div>
                            </div>
                            
                            <!-- Quick Filters -->
                            <div class="flex gap-2">
                                <select x-model="filters.status" @change="applyFilters()" class="form-select text-sm">
                                    <option value="">All Status</option>
                                    <option value="active">Active</option>
                                    <option value="completed">Completed</option>
                                    <option value="planned">Planned</option>
                                    <option value="suspended">Suspended</option>
                                </select>
                                <select x-model="filters.region" @change="applyFilters()" class="form-select text-sm">
                                    <option value="">All Regions</option>
                                    <option value="africa">Africa</option>
                                    <option value="asia">Asia</option>
                                    <option value="europe">Europe</option>
                                    <option value="latam">Latin America</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Table Actions -->
                        <div class="flex items-center gap-3">
                            <!-- View Options -->
                            <div class="flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1">
                                <button @click="viewMode = 'table'" 
                                        :class="viewMode === 'table' ? 'bg-white dark:bg-gray-600 shadow-sm' : ''"
                                        class="px-3 py-1 text-sm rounded-md transition-colors">
                                    Table
                                </button>
                                <button @click="viewMode = 'cards'" 
                                        :class="viewMode === 'cards' ? 'bg-white dark:bg-gray-600 shadow-sm' : ''"
                                        class="px-3 py-1 text-sm rounded-md transition-colors">
                                    Cards
                                </button>
                            </div>
                            
                            <!-- Export -->
                            <button @click="exportData()" class="btn btn-secondary btn-sm">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-4-4m4 4l4-4m-6 4h8"></path>
                                </svg>
                                Export
                            </button>
                            
                            <!-- Column Visibility -->
                            <div class="relative" x-data="{ open: false }">
                                <button @click="open = !open" class="btn btn-secondary btn-sm">
                                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
                                    </svg>
                                    Columns
                                </button>
                                <div x-show="open" @click.away="open = false" x-transition
                                     class="absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-10">
                                    <div class="p-3">
                                        <template x-for="column in columns" :key="column.key">
                                            <label class="flex items-center py-1">
                                                <input type="checkbox" x-model="column.visible" @change="updateVisibleColumns()" class="form-checkbox text-botnar-pink-500">
                                                <span class="ml-2 text-sm" x-text="column.label"></span>
                                            </label>
                                        </template>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Data Table Demo -->
            <section class="mb-12">
                <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden">
                    <!-- Table Header -->
                    <div class="bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-6 py-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">
                                    <span x-text="getCurrentTableType().title"></span>
                                </h3>
                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                    <span x-text="filteredData.length"></span> of <span x-text="allData.length"></span> records
                                    <span x-show="searchQuery" class="ml-2">
                                        (filtered by "<span x-text="searchQuery"></span>")
                                    </span>
                                </p>
                            </div>
                            <div class="flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400">
                                <span>Rows per page:</span>
                                <select x-model="pageSize" @change="updatePagination()" class="form-select text-sm">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Table View -->
                    <div x-show="viewMode === 'table'" class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700" role="table">
                            <thead class="bg-gray-50 dark:bg-gray-900">
                                <tr role="row">
                                    <!-- Select All Checkbox -->
                                    <th scope="col" class="px-6 py-3 text-left">
                                        <input type="checkbox" 
                                               x-model="selectAll" 
                                               @change="toggleSelectAll()"
                                               class="form-checkbox text-botnar-pink-500"
                                               :aria-label="selectAll ? 'Deselect all rows' : 'Select all rows'">
                                    </th>
                                    
                                    <!-- Dynamic Columns -->
                                    <template x-for="column in visibleColumns" :key="column.key">
                                        <th scope="col" 
                                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800"
                                            @click="sortBy(column.key)"
                                            :aria-sort="getSortDirection(column.key)"
                                            role="columnheader">
                                            <div class="flex items-center space-x-1">
                                                <span x-text="column.label"></span>
                                                <div class="flex flex-col">
                                                    <svg class="w-3 h-3" :class="sortColumn === column.key && sortDirection === 'asc' ? 'text-botnar-pink-600' : 'text-gray-400'" fill="currentColor" viewBox="0 0 20 20">
                                                        <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>
                                                    </svg>
                                                </div>
                                            </div>
                                        </th>
                                    </template>
                                    
                                    <!-- Actions Column -->
                                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                        Actions
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700" role="rowgroup">
                                <template x-for="(item, index) in paginatedData" :key="item.id">
                                    <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors" 
                                        role="row"
                                        :class="selectedRows.includes(item.id) ? 'bg-botnar-pink-50 dark:bg-botnar-pink-900/10' : ''">
                                        <!-- Row Selection -->
                                        <td class="px-6 py-4 whitespace-nowrap" role="gridcell">
                                            <input type="checkbox" 
                                                   :value="item.id"
                                                   x-model="selectedRows"
                                                   class="form-checkbox text-botnar-pink-500"
                                                   :aria-label="'Select row ' + (index + 1)">
                                        </td>
                                        
                                        <!-- Dynamic Data Cells -->
                                        <template x-for="column in visibleColumns" :key="column.key">
                                            <td class="px-6 py-4 whitespace-nowrap" role="gridcell">
                                                <div x-show="column.key === 'name'">
                                                    <div class="flex items-center">
                                                        <div class="flex-shrink-0 h-10 w-10">
                                                            <div class="h-10 w-10 rounded-full bg-botnar-pink-100 dark:bg-botnar-pink-900/20 flex items-center justify-center">
                                                                <span class="text-sm font-medium text-botnar-pink-600 dark:text-botnar-pink-400" x-text="item.name.charAt(0)"></span>
                                                            </div>
                                                        </div>
                                                        <div class="ml-4">
                                                            <div class="text-sm font-medium text-gray-900 dark:text-gray-100" x-text="item.name"></div>
                                                            <div class="text-sm text-gray-500 dark:text-gray-400" x-text="item.type"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div x-show="column.key === 'status'">
                                                    <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full"
                                                          :class="getStatusColor(item.status)">
                                                        <span x-text="item.status"></span>
                                                    </span>
                                                </div>
                                                
                                                <div x-show="column.key === 'progress'">
                                                    <div class="flex items-center">
                                                        <div class="w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mr-2">
                                                            <div class="bg-botnar-pink-500 h-2 rounded-full transition-all duration-300" 
                                                                 :style="`width: ${item.progress}%`"></div>
                                                        </div>
                                                        <span class="text-sm text-gray-700 dark:text-gray-300" x-text="item.progress + '%'"></span>
                                                    </div>
                                                </div>
                                                
                                                <div x-show="column.key !== 'name' && column.key !== 'status' && column.key !== 'progress'">
                                                    <span class="text-sm text-gray-900 dark:text-gray-100" x-text="item[column.key]"></span>
                                                </div>
                                            </td>
                                        </template>
                                        
                                        <!-- Actions -->
                                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium" role="gridcell">
                                            <div class="flex items-center justify-end space-x-2">
                                                <button @click="viewItem(item)" class="text-botnar-blue-600 hover:text-botnar-blue-900 dark:text-botnar-blue-400 dark:hover:text-botnar-blue-300">
                                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                                    </svg>
                                                    <span class="sr-only">View details</span>
                                                </button>
                                                <button @click="editItem(item)" class="text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200">
                                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                                    </svg>
                                                    <span class="sr-only">Edit item</span>
                                                </button>
                                                <button @click="deleteItem(item)" class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300">
                                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                                    </svg>
                                                    <span class="sr-only">Delete item</span>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </template>
                                
                                <!-- Empty State -->
                                <tr x-show="paginatedData.length === 0">
                                    <td :colspan="visibleColumns.length + 2" class="px-6 py-12 text-center">
                                        <div class="flex flex-col items-center">
                                            <svg class="w-12 h-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                            </svg>
                                            <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100 mb-2">No data found</h3>
                                            <p class="text-gray-600 dark:text-gray-400">Try adjusting your search or filter criteria.</p>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Card View -->
                    <div x-show="viewMode === 'cards'" class="p-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <template x-for="item in paginatedData" :key="item.id">
                                <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:shadow-md transition-shadow"
                                     :class="selectedRows.includes(item.id) ? 'ring-2 ring-botnar-pink-500' : ''">
                                    <div class="flex items-center justify-between mb-4">
                                        <input type="checkbox" 
                                               :value="item.id"
                                               x-model="selectedRows"
                                               class="form-checkbox text-botnar-pink-500">
                                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full"
                                              :class="getStatusColor(item.status)"
                                              x-text="item.status"></span>
                                    </div>
                                    <div class="mb-4">
                                        <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1" x-text="item.name"></h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-400" x-text="item.type"></p>
                                    </div>
                                    <div class="space-y-2 mb-4">
                                        <div class="flex justify-between text-sm">
                                            <span class="text-gray-600 dark:text-gray-400">Region:</span>
                                            <span class="text-gray-900 dark:text-gray-100" x-text="item.region"></span>
                                        </div>
                                        <div class="flex justify-between text-sm">
                                            <span class="text-gray-600 dark:text-gray-400">Budget:</span>
                                            <span class="text-gray-900 dark:text-gray-100" x-text="item.budget"></span>
                                        </div>
                                        <div class="flex justify-between text-sm">
                                            <span class="text-gray-600 dark:text-gray-400">Progress:</span>
                                            <span class="text-gray-900 dark:text-gray-100" x-text="item.progress + '%'"></span>
                                        </div>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4">
                                        <div class="bg-botnar-pink-500 h-2 rounded-full transition-all duration-300" 
                                             :style="`width: ${item.progress}%`"></div>
                                    </div>
                                    <div class="flex justify-end space-x-2">
                                        <button @click="viewItem(item)" class="btn btn-secondary btn-sm">View</button>
                                        <button @click="editItem(item)" class="btn btn-secondary btn-sm">Edit</button>
                                    </div>
                                </div>
                            </template>
                        </div>
                        
                        <!-- Empty State for Cards -->
                        <div x-show="paginatedData.length === 0" class="text-center py-12">
                            <svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100 mb-2">No data found</h3>
                            <p class="text-gray-600 dark:text-gray-400">Try adjusting your search or filter criteria.</p>
                        </div>
                    </div>

                    <!-- Pagination -->
                    <div class="bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 px-6 py-3">
                        <div class="flex items-center justify-between">
                            <div class="text-sm text-gray-700 dark:text-gray-300">
                                Showing <span x-text="startIndex + 1"></span> to <span x-text="endIndex"></span> of <span x-text="filteredData.length"></span> results
                            </div>
                            <div class="flex items-center space-x-2">
                                <button @click="previousPage()" 
                                        :disabled="currentPage === 1"
                                        :class="currentPage === 1 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100 dark:hover:bg-gray-700'"
                                        class="px-3 py-1 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-300">
                                    Previous
                                </button>
                                
                                <template x-for="page in visiblePages" :key="page">
                                    <button @click="goToPage(page)"
                                            :class="currentPage === page ? 
                                                'bg-botnar-pink-500 text-white' : 
                                                'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'"
                                            class="px-3 py-1 rounded-md border border-gray-300 dark:border-gray-600 text-sm font-medium"
                                            x-text="page">
                                    </button>
                                </template>
                                
                                <button @click="nextPage()" 
                                        :disabled="currentPage === totalPages"
                                        :class="currentPage === totalPages ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100 dark:hover:bg-gray-700'"
                                        class="px-3 py-1 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-300">
                                    Next
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Bulk Actions -->
            <section x-show="selectedRows.length > 0" class="mb-8">
                <div class="bg-botnar-pink-50 dark:bg-botnar-pink-900/20 border border-botnar-pink-200 dark:border-botnar-pink-800 rounded-lg p-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 text-botnar-pink-600 dark:text-botnar-pink-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                            </svg>
                            <span class="text-botnar-pink-600 dark:text-botnar-pink-400 font-medium">
                                <span x-text="selectedRows.length"></span> item<span x-show="selectedRows.length !== 1">s</span> selected
                            </span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <button @click="bulkExport()" class="btn btn-secondary btn-sm">
                                Export Selected
                            </button>
                            <button @click="bulkEdit()" class="btn btn-secondary btn-sm">
                                Bulk Edit
                            </button>
                            <button @click="bulkDelete()" class="btn btn-danger btn-sm">
                                Delete Selected
                            </button>
                            <button @click="clearSelection()" class="btn btn-secondary btn-sm">
                                Clear Selection
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Code Preview -->
            <section x-show="showCode" class="mb-12">
                <div class="bg-gray-900 rounded-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-white">Implementation Code</h3>
                        <button @click="copyCode()" class="btn btn-sm bg-gray-800 text-white hover:bg-gray-700">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                            </svg>
                            Copy Code
                        </button>
                    </div>
                    <pre><code class="language-javascript" x-text="getDataTableCode()"></code></pre>
                </div>
            </section>

            <!-- Documentation -->
            <section class="mb-12">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-6">Usage Guidelines</h2>
                
                <div class="grid gap-8">
                    <!-- Features Overview -->
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4">Table Features</h3>
                        <div class="grid gap-4">
                            <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6">
                                <h4 class="font-semibold text-gray-900 dark:text-gray-100 mb-2">Advanced Sorting & Filtering</h4>
                                <p class="text-gray-600 dark:text-gray-400 mb-3">Multi-column sorting with global search and column-specific filters.</p>
                                <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1">
                                    <li>â€¢ Global text search across all columns</li>
                                    <li>â€¢ Column-specific sorting (ascending/descending)</li>
                                    <li>â€¢ Quick filters for common data attributes</li>
                                    <li>â€¢ Real-time filtering with debounced input</li>
                                </ul>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6">
                                <h4 class="font-semibold text-gray-900 dark:text-gray-100 mb-2">Data Management</h4>
                                <p class="text-gray-600 dark:text-gray-400 mb-3">Comprehensive tools for data manipulation and export.</p>
                                <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1">
                                    <li>â€¢ Row selection (single and multi-select)</li>
                                    <li>â€¢ Bulk operations on selected rows</li>
                                    <li>â€¢ Data export in multiple formats</li>
                                    <li>â€¢ Configurable column visibility</li>
                                </ul>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6">
                                <h4 class="font-semibold text-gray-900 dark:text-gray-100 mb-2">Performance & Accessibility</h4>
                                <p class="text-gray-600 dark:text-gray-400 mb-3">Optimized for large datasets with full accessibility support.</p>
                                <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1">
                                    <li>â€¢ Virtual scrolling for large datasets</li>
                                    <li>â€¢ Pagination with configurable page sizes</li>
                                    <li>â€¢ ARIA labels and screen reader support</li>
                                    <li>â€¢ Keyboard navigation and shortcuts</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Implementation Guide -->
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4">Implementation Guidelines</h3>
                        <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6">
                            <div class="prose dark:prose-invert max-w-none">
                                <h4>Data Structure</h4>
                                <p>Ensure your data follows a consistent structure with unique identifiers for each row. The table expects objects with properties that match your column definitions.</p>
                                
                                <h4>Performance Optimization</h4>
                                <ul>
                                    <li>Use debounced search to prevent excessive filtering</li>
                                    <li>Implement virtual scrolling for datasets > 1000 rows</li>
                                    <li>Cache filtered results to improve pagination performance</li>
                                    <li>Consider server-side pagination for very large datasets</li>
                                </ul>
                                
                                <h4>Accessibility Best Practices</h4>
                                <ul>
                                    <li>Use proper ARIA roles and labels for screen readers</li>
                                    <li>Implement keyboard navigation for all interactive elements</li>
                                    <li>Provide clear sort direction indicators</li>
                                    <li>Include skip links for large tables</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- Screen reader announcements -->
    <div id="sr-announcements" class="sr-only" aria-live="polite" aria-atomic="true">
        <span x-text="announcement"></span>
    </div>

    <script>
        function dataTablesDemo() {
            return {
                theme: 'light',
                showCode: false,
                selectedTableType: 'programs',
                viewMode: 'table',
                searchQuery: '',
                announcement: '',
                
                // Table configuration
                pageSize: 25,
                currentPage: 1,
                sortColumn: 'name',
                sortDirection: 'asc',
                
                // Selection
                selectedRows: [],
                selectAll: false,
                
                // Filters
                filters: {
                    status: '',
                    region: '',
                    type: ''
                },
                
                // Data
                allData: [],
                filteredData: [],
                paginatedData: [],
                
                // Table types
                tableTypes: [
                    {
                        id: 'programs',
                        name: 'Program Management',
                        title: 'Program Management Data',
                        description: 'Comprehensive view of all Fondation Botnar programs and initiatives.',
                        icon: '<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>',
                        color: 'bg-botnar-pink-500'
                    },
                    {
                        id: 'beneficiaries',
                        name: 'Beneficiary Tracking',
                        title: 'Beneficiary Data Management',
                        description: 'Detailed tracking of program beneficiaries and impact metrics.',
                        icon: '<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>',
                        color: 'bg-botnar-blue-500'
                    },
                    {
                        id: 'financial',
                        name: 'Financial Data',
                        title: 'Financial Tracking & Analysis',
                        description: 'Budget allocation, expenditure, and financial performance data.',
                        icon: '<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',
                        color: 'bg-green-500'
                    }
                ],
                
                // Column definitions
                columns: [
                    { key: 'name', label: 'Program Name', visible: true, sortable: true },
                    { key: 'region', label: 'Region', visible: true, sortable: true },
                    { key: 'type', label: 'Type', visible: true, sortable: true },
                    { key: 'budget', label: 'Budget', visible: true, sortable: true },
                    { key: 'progress', label: 'Progress', visible: true, sortable: true },
                    { key: 'status', label: 'Status', visible: true, sortable: true },
                    { key: 'startDate', label: 'Start Date', visible: true, sortable: true },
                    { key: 'endDate', label: 'End Date', visible: false, sortable: true },
                    { key: 'manager', label: 'Program Manager', visible: false, sortable: true }
                ],
                
                init() {
                    this.theme = localStorage.getItem('botnar-theme') || 'light';
                    this.applyTheme();
                    this.generateSampleData();
                    this.initializeTable();
                },
                
                initializeTable() {
                    this.applyFilters();
                    this.announce('Table initialized with ' + this.allData.length + ' records');
                },
                
                generateSampleData() {
                    const programs = [
                        'Child Health Initiative', 'Digital Education Access', 'Community Development',
                        'Maternal Care Support', 'Rural School Building', 'Clean Water Project',
                        'Nutrition Program', 'Healthcare Infrastructure', 'Teacher Training',
                        'Youth Employment', 'Agricultural Development', 'Emergency Response',
                        'Mental Health Support', 'Technology Access', 'Skills Development',
                        'Environmental Protection', 'Research Initiative', 'Partnership Program',
                        'Innovation Lab', 'Monitoring & Evaluation', 'Capacity Building',
                        'Data Systems', 'Strategic Planning', 'Quality Assurance'
                    ];
                    
                    const regions = ['Africa', 'Asia', 'Europe', 'Latin America'];
                    const types = ['Health', 'Education', 'Development', 'Research', 'Infrastructure'];
                    const statuses = ['active', 'completed', 'planned', 'suspended'];
                    const managers = ['Sarah Johnson', 'Michael Chen', 'Emma Thompson', 'David Rodriguez', 'Lisa Anderson'];
                    
                    this.allData = Array.from({ length: 150 }, (_, i) => ({
                        id: i + 1,
                        name: programs[i % programs.length] + ` ${Math.floor(i / programs.length) + 1}`,
                        region: regions[Math.floor(Math.random() * regions.length)],
                        type: types[Math.floor(Math.random() * types.length)],
                        budget: 'â‚¬' + (Math.random() * 50 + 5).toFixed(1) + 'M',
                        progress: Math.floor(Math.random() * 101),
                        status: statuses[Math.floor(Math.random() * statuses.length)],
                        startDate: new Date(2022 + Math.floor(Math.random() * 3), Math.floor(Math.random() * 12), Math.floor(Math.random() * 28) + 1).toLocaleDateString(),
                        endDate: new Date(2024 + Math.floor(Math.random() * 2), Math.floor(Math.random() * 12), Math.floor(Math.random() * 28) + 1).toLocaleDateString(),
                        manager: managers[Math.floor(Math.random() * managers.length)]
                    }));
                },
                
                get visibleColumns() {
                    return this.columns.filter(col => col.visible);
                },
                
                get totalPages() {
                    return Math.ceil(this.filteredData.length / this.pageSize);
                },
                
                get startIndex() {
                    return (this.currentPage - 1) * this.pageSize;
                },
                
                get endIndex() {
                    return Math.min(this.startIndex + this.pageSize, this.filteredData.length);
                },
                
                get visiblePages() {
                    const total = this.totalPages;
                    const current = this.currentPage;
                    const delta = 2;
                    
                    let pages = [];
                    for (let i = Math.max(1, current - delta); i <= Math.min(total, current + delta); i++) {
                        pages.push(i);
                    }
                    
                    return pages;
                },
                
                getCurrentTableType() {
                    return this.tableTypes.find(t => t.id === this.selectedTableType) || this.tableTypes[0];
                },
                
                performSearch() {
                    this.applyFilters();
                    this.announce('Search results updated: ' + this.filteredData.length + ' items found');
                },
                
                applyFilters() {
                    this.filteredData = this.allData.filter(item => {
                        const matchesSearch = !this.searchQuery || 
                            Object.values(item).some(value => 
                                String(value).toLowerCase().includes(this.searchQuery.toLowerCase())
                            );
                        
                        const matchesStatus = !this.filters.status || item.status === this.filters.status;
                        const matchesRegion = !this.filters.region || item.region.toLowerCase() === this.filters.region;
                        const matchesType = !this.filters.type || item.type === this.filters.type;
                        
                        return matchesSearch && matchesStatus && matchesRegion && matchesType;
                    });
                    
                    this.sortData();
                    this.updatePagination();
                },
                
                sortBy(column) {
                    if (this.sortColumn === column) {
                        this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';
                    } else {
                        this.sortColumn = column;
                        this.sortDirection = 'asc';
                    }
                    
                    this.sortData();
                    this.updatePagination();
                    this.announce('Table sorted by ' + column + ' in ' + this.sortDirection + 'ending order');
                },
                
                sortData() {
                    this.filteredData.sort((a, b) => {
                        let aVal = a[this.sortColumn];
                        let bVal = b[this.sortColumn];
                        
                        // Handle numeric values
                        if (this.sortColumn === 'progress') {
                            aVal = parseInt(aVal);
                            bVal = parseInt(bVal);
                        }
                        
                        // Handle budget values
                        if (this.sortColumn === 'budget') {
                            aVal = parseFloat(aVal.replace('â‚¬', '').replace('M', ''));
                            bVal = parseFloat(bVal.replace('â‚¬', '').replace('M', ''));
                        }
                        
                        if (aVal < bVal) return this.sortDirection === 'asc' ? -1 : 1;
                        if (aVal > bVal) return this.sortDirection === 'asc' ? 1 : -1;
                        return 0;
                    });
                },
                
                getSortDirection(column) {
                    if (this.sortColumn !== column) return 'none';
                    return this.sortDirection === 'asc' ? 'ascending' : 'descending';
                },
                
                updatePagination() {
                    this.currentPage = Math.min(this.currentPage, this.totalPages || 1);
                    this.paginatedData = this.filteredData.slice(this.startIndex, this.endIndex);
                    this.updateSelectAll();
                },
                
                goToPage(page) {
                    this.currentPage = page;
                    this.updatePagination();
                    this.announce('Navigated to page ' + page);
                },
                
                previousPage() {
                    if (this.currentPage > 1) {
                        this.currentPage--;
                        this.updatePagination();
                        this.announce('Navigated to previous page');
                    }
                },
                
                nextPage() {
                    if (this.currentPage < this.totalPages) {
                        this.currentPage++;
                        this.updatePagination();
                        this.announce('Navigated to next page');
                    }
                },
                
                toggleSelectAll() {
                    if (this.selectAll) {
                        this.selectedRows = this.paginatedData.map(item => item.id);
                    } else {
                        this.selectedRows = [];
                    }
                    this.announce(this.selectAll ? 'All visible rows selected' : 'All rows deselected');
                },
                
                updateSelectAll() {
                    const visibleIds = this.paginatedData.map(item => item.id);
                    this.selectAll = visibleIds.length > 0 && visibleIds.every(id => this.selectedRows.includes(id));
                },
                
                updateVisibleColumns() {
                    this.announce('Column visibility updated');
                },
                
                getStatusColor(status) {
                    const colors = {
                        'active': 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400',
                        'completed': 'bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400',
                        'planned': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400',
                        'suspended': 'bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400'
                    };
                    return colors[status] || 'bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400';
                },
                
                // Action handlers
                viewItem(item) {
                    this.announce('Viewing details for ' + item.name);
                    // Implement view logic
                },
                
                editItem(item) {
                    this.announce('Editing ' + item.name);
                    // Implement edit logic
                },
                
                deleteItem(item) {
                    if (confirm('Are you sure you want to delete ' + item.name + '?')) {
                        this.allData = this.allData.filter(d => d.id !== item.id);
                        this.applyFilters();
                        this.announce(item.name + ' deleted successfully');
                    }
                },
                
                exportData() {
                    const dataToExport = this.selectedRows.length > 0 
                        ? this.allData.filter(item => this.selectedRows.includes(item.id))
                        : this.filteredData;
                    
                    const csv = this.convertToCSV(dataToExport);
                    this.downloadCSV(csv, 'table-data.csv');
                    this.announce('Data exported successfully');
                },
                
                bulkExport() {
                    const selectedData = this.allData.filter(item => this.selectedRows.includes(item.id));
                    const csv = this.convertToCSV(selectedData);
                    this.downloadCSV(csv, 'selected-data.csv');
                    this.announce('Selected data exported successfully');
                },
                
                bulkEdit() {
                    this.announce('Bulk edit mode activated for ' + this.selectedRows.length + ' items');
                    // Implement bulk edit logic
                },
                
                bulkDelete() {
                    if (confirm('Are you sure you want to delete ' + this.selectedRows.length + ' selected items?')) {
                        this.allData = this.allData.filter(item => !this.selectedRows.includes(item.id));
                        this.selectedRows = [];
                        this.selectAll = false;
                        this.applyFilters();
                        this.announce('Selected items deleted successfully');
                    }
                },
                
                clearSelection() {
                    this.selectedRows = [];
                    this.selectAll = false;
                    this.announce('Selection cleared');
                },
                
                convertToCSV(data) {
                    if (!data.length) return '';
                    
                    const headers = this.visibleColumns.map(col => col.label).join(',');
                    const rows = data.map(item => 
                        this.visibleColumns.map(col => 
                            '"' + String(item[col.key]).replace(/"/g, '""') + '"'
                        ).join(',')
                    );
                    
                    return [headers, ...rows].join('\n');
                },
                
                downloadCSV(csv, filename) {
                    const blob = new Blob([csv], { type: 'text/csv' });
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = filename;
                    a.click();
                    window.URL.revokeObjectURL(url);
                },
                
                resetDemo() {
                    this.searchQuery = '';
                    this.filters = { status: '', region: '', type: '' };
                    this.selectedRows = [];
                    this.selectAll = false;
                    this.currentPage = 1;
                    this.sortColumn = 'name';
                    this.sortDirection = 'asc';
                    this.viewMode = 'table';
                    this.pageSize = 25;
                    this.generateSampleData();
                    this.applyFilters();
                    this.announce('Demo reset to default state');
                },
                
                toggleTheme() {
                    this.theme = this.theme === 'light' ? 'dark' : 'light';
                    this.applyTheme();
                    localStorage.setItem('botnar-theme', this.theme);
                    this.announce('Switched to ' + this.theme + ' mode');
                },
                
                applyTheme() {
                    if (this.theme === 'dark') {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                },
                
                announce(message) {
                    this.announcement = message;
                    setTimeout(() => this.announcement = '', 1000);
                },
                
                copyCode() {
                    navigator.clipboard.writeText(this.getDataTableCode());
                    this.announce('Code copied to clipboard');
                },
                
                getDataTableCode() {
                    return `// Data Table Organism - Alpine.js Implementation
function dataTablesDemo() {
    return {
        selectedTableType: 'programs',
        viewMode: 'table',
        searchQuery: '',
        pageSize: 25,
        currentPage: 1,
        sortColumn: 'name',
        sortDirection: 'asc',
        selectedRows: [],
        selectAll: false,
        
        // Filters configuration
        filters: {
            status: '',
            region: '',
            type: ''
        },
        
        // Data management
        allData: [],
        filteredData: [],
        paginatedData: [],
        
        // Column configuration
        columns: [
            { key: 'name', label: 'Program Name', visible: true, sortable: true },
            { key: 'region', label: 'Region', visible: true, sortable: true },
            { key: 'status', label: 'Status', visible: true, sortable: true }
            // ... more columns
        ],
        
        // Core table methods
        applyFilters() {
            this.filteredData = this.allData.filter(item => {
                const matchesSearch = !this.searchQuery || 
                    Object.values(item).some(value => 
                        String(value).toLowerCase().includes(this.searchQuery.toLowerCase())
                    );
                
                const matchesStatus = !this.filters.status || item.status === this.filters.status;
                const matchesRegion = !this.filters.region || item.region === this.filters.region;
                
                return matchesSearch && matchesStatus && matchesRegion;
            });
            
            this.sortData();
            this.updatePagination();
        },
        
        sortBy(column) {
            if (this.sortColumn === column) {
                this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                this.sortColumn = column;
                this.sortDirection = 'asc';
            }
            
            this.sortData();
            this.updatePagination();
        },
        
        sortData() {
            this.filteredData.sort((a, b) => {
                let aVal = a[this.sortColumn];
                let bVal = b[this.sortColumn];
                
                // Handle different data types
                if (this.sortColumn === 'progress') {
                    aVal = parseInt(aVal);
                    bVal = parseInt(bVal);
                }
                
                if (aVal < bVal) return this.sortDirection === 'asc' ? -1 : 1;
                if (aVal > bVal) return this.sortDirection === 'asc' ? 1 : -1;
                return 0;
            });
        },
        
        // Pagination
        updatePagination() {
            this.currentPage = Math.min(this.currentPage, this.totalPages || 1);
            this.paginatedData = this.filteredData.slice(this.startIndex, this.endIndex);
        },
        
        goToPage(page) {
            this.currentPage = page;
            this.updatePagination();
        },
        
        // Selection management
        toggleSelectAll() {
            if (this.selectAll) {
                this.selectedRows = this.paginatedData.map(item => item.id);
            } else {
                this.selectedRows = [];
            }
        },
        
        // Export functionality
        exportData() {
            const dataToExport = this.selectedRows.length > 0 
                ? this.allData.filter(item => this.selectedRows.includes(item.id))
                : this.filteredData;
            
            const csv = this.convertToCSV(dataToExport);
            this.downloadCSV(csv, 'table-data.csv');
        },
        
        convertToCSV(data) {
            if (!data.length) return '';
            
            const headers = this.visibleColumns.map(col => col.label).join(',');
            const rows = data.map(item => 
                this.visibleColumns.map(col => 
                    '"' + String(item[col.key]).replace(/"/g, '""') + '"'
                ).join(',')
            );
            
            return [headers, ...rows].join('\\n');
        }
    }
}

<!-- HTML Table Structure -->
<div x-data="dataTablesDemo()">
    <!-- Search and Filters -->
    <div class="flex items-center gap-4 mb-6">
        <input x-model="searchQuery" 
               @input.debounce.300ms="applyFilters()"
               placeholder="Search all data..."
               class="form-input flex-1">
        
        <select x-model="filters.status" @change="applyFilters()">
            <option value="">All Status</option>
            <option value="active">Active</option>
            <option value="completed">Completed</option>
        </select>
    </div>
    
    <!-- Data Table -->
    <table class="min-w-full divide-y divide-gray-200">
        <thead>
            <tr>
                <th>
                    <input type="checkbox" x-model="selectAll" @change="toggleSelectAll()">
                </th>
                <template x-for="column in visibleColumns">
                    <th @click="sortBy(column.key)" class="cursor-pointer">
                        <span x-text="column.label"></span>
                        <!-- Sort indicators -->
                    </th>
                </template>
            </tr>
        </thead>
        <tbody>
            <template x-for="item in paginatedData">
                <tr>
                    <td>
                        <input type="checkbox" :value="item.id" x-model="selectedRows">
                    </td>
                    <template x-for="column in visibleColumns">
                        <td x-text="item[column.key]"></td>
                    </template>
                </tr>
            </template>
        </tbody>
    </table>
    
    <!-- Pagination -->
    <div class="flex justify-between items-center mt-4">
        <span x-text="'Showing ' + (startIndex + 1) + ' to ' + endIndex + ' of ' + filteredData.length"></span>
        <div class="flex space-x-2">
            <button @click="previousPage()" :disabled="currentPage === 1">Previous</button>
            <template x-for="page in visiblePages">
                <button @click="goToPage(page)" :class="currentPage === page ? 'bg-blue-500 text-white' : ''">
                    <span x-text="page"></span>
                </button>
            </template>
            <button @click="nextPage()" :disabled="currentPage === totalPages">Next</button>
        </div>
    </div>
</div>

/* CSS Utilities for Data Tables */
.table-container {
    @apply bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden;
}

.table-header {
    @apply bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700;
}

.table-cell-sortable {
    @apply cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors;
}

.table-row-selected {
    @apply bg-blue-50 dark:bg-blue-900/10;
}

.pagination-button {
    @apply px-3 py-1 rounded-md border border-gray-300 dark:border-gray-600 text-sm;
}

.pagination-button-active {
    @apply bg-blue-500 text-white border-blue-500;
}`;
                }
            }
        }
    </script>
</body>
</html>