<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Financial Reports - Fondation Botnar Dashboard</title>
    <meta
      name="description"
      content="Comprehensive financial reporting dashboard with budget tracking, expenditure analysis, and financial performance metrics"
    />

    <!-- Botnar Design System CSS -->
    <link rel="stylesheet" href="../../../dist/botnar-design-system.css" />

    <!-- Chart.js - Load first -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.js"></script>

    <!-- Botnar Chart Configuration - Load second -->
    <script src="../../assets/js/chart-config-cdn.js"></script>

    <!-- Data Management & Performance -->
    <script src="../data-manager.js"></script>
    <script src="../loading-components.js"></script>
    <script src="../error-handler.js"></script>
    <script src="../performance-optimizer.js"></script>
    <script src="../security-utils.js"></script>
    <script src="../chart-initializer.js"></script>

    <!-- Alpine.js - Load after Chart.js -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>

    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <style>
      .dashboard-nav {
        background: linear-gradient(135deg, #0066cc 0%, #004499 100%);
      }
      .nav-item {
        transition: all 0.2s ease;
      }
      .nav-item:hover {
        background: rgba(255, 255, 255, 0.1);
      }
      .nav-item.active {
        background: rgba(255, 255, 255, 0.2);
        border-left: 4px solid #ff6b9d;
      }
      .financial-card {
        transition: all 0.2s ease;
      }
      .financial-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      }
      .expense-row:hover {
        background-color: rgba(0, 102, 204, 0.05);
      }
      .budget-bar {
        transition: width 0.5s ease;
      }

      /* Mobile Content Fixes */
      @media (max-width: 640px) {
        .main-content header .px-6 {
          padding-left: 1rem;
          padding-right: 1rem;
        }

        .header-content {
          flex-direction: column;
          align-items: flex-start !important;
          gap: 1rem;
        }

        .mobile-hide-sm {
          display: none;
        }

        main#main-content {
          padding: 1rem;
        }

        .financial-grid {
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        h1 {
          font-size: 1.5rem !important;
        }

        h2 {
          font-size: 1.25rem !important;
        }

        .text-wrap {
          word-break: break-word;
          hyphens: auto;
        }

        .chart-container {
          min-height: 200px;
          overflow-x: auto;
        }

        .table-responsive {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }
        
        /* Mobile header controls */
        .header-content > div:last-child {
          width: 100%;
        }
        
        /* Mobile select boxes */
        select {
          min-width: 0;
          text-overflow: ellipsis;
        }
      }

      @media (max-width: 768px) {
        .main-content header .px-6 {
          padding-left: 1.5rem;
          padding-right: 1.5rem;
        }

        main#main-content {
          padding: 1.5rem;
        }

        .btn-mobile-text {
          display: none;
        }

        .chart-container canvas {
          max-height: 300px;
        }
      }

      @media (max-width: 1023px) {
        .sidebar {
          position: fixed;
          top: 0;
          left: 0;
          height: 100vh;
          z-index: 50;
          transform: translateX(-100%);
          transition: transform 0.3s ease-in-out;
        }
        .sidebar.open {
          transform: translateX(0);
        }
        .mobile-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background: rgba(0, 0, 0, 0.5);
          z-index: 40;
          opacity: 0;
          pointer-events: none;
          transition: opacity 0.3s ease-in-out;
        }
        .mobile-backdrop.show {
          opacity: 1;
          pointer-events: auto;
        }
        .main-content {
          margin-left: 0 !important;
        }

        .grid-responsive {
          grid-template-columns: 1fr;
        }

        .chart-wrapper {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }
      }

      @media (min-width: 1024px) {
        .sidebar {
          position: relative;
          transform: none;
        }
      }
    </style>
  </head>

  <body class="h-full bg-gray-50 dark:bg-gray-900" x-data="financialReports()">
    <!-- Skip to content link -->
    <a
      href="#main-content"
      class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-botnar-blue-500 text-white px-4 py-2 rounded-md z-50"
    >
      Skip to main content
    </a>

    <!-- Mobile Backdrop -->
    <div
      class="mobile-backdrop"
      :class="{ 'show': sidebarOpen }"
      @click="sidebarOpen = false"
    ></div>

    <div class="min-h-full flex">
      <!-- Sidebar Navigation -->
      <nav
        class="w-64 dashboard-nav text-white flex flex-col sidebar"
        :class="{ 'open': sidebarOpen }"
        aria-label="Main Navigation"
      >
        <!-- Logo and Header -->
        <div class="p-6 border-b border-white/20">
          <div class="flex items-center space-x-3">
            <div class="flex items-center justify-center">
              <img src="../../assets/images/logo-fondation-botnar.svg" alt="Fondation Botnar Logo" class="h-8 w-auto">
            </div>
            <div>
              <p class="text-sm text-blue-200">Dashboard</p>
            </div>
          </div>
        </div>

        <!-- Navigation Menu -->
        <div class="flex-1 px-3 py-6 space-y-1">
          <a
            href="../dashboard-home/index.html"
            class="nav-item flex items-center px-3 py-2 rounded-md text-sm font-medium"
          >
            <svg
              class="w-5 h-5 mr-3"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"
              />
            </svg>
            Dashboard Home
          </a>

          <a
            href="../grant-portfolio/index.html"
            class="nav-item flex items-center px-3 py-2 rounded-md text-sm font-medium"
          >
            <svg
              class="w-5 h-5 mr-3"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
              />
            </svg>
            Grant Portfolio
          </a>

          <a
            href="../impact-assessment/index.html"
            class="nav-item flex items-center px-3 py-2 rounded-md text-sm font-medium"
          >
            <svg
              class="w-5 h-5 mr-3"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
              />
            </svg>
            Impact Assessment
          </a>

          <a
            href="../financial-reports/index.html"
            class="nav-item active flex items-center px-3 py-2 rounded-md text-sm font-medium"
          >
            <svg
              class="w-5 h-5 mr-3"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"
              />
            </svg>
            Financial Reports
          </a>

          <a
            href="../program-analysis/index.html"
            class="nav-item flex items-center px-3 py-2 rounded-md text-sm font-medium"
          >
            <svg
              class="w-5 h-5 mr-3"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
              />
            </svg>
            Program Analysis
          </a>
        </div>

        <!-- User Section -->
        <div class="p-4 border-t border-white/20">
          <div class="flex items-center space-x-3">
            <div
              class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
                />
              </svg>
            </div>
            <div class="flex-1">
              <p class="text-sm font-medium">Finance Team</p>
              <p class="text-xs text-blue-200">Admin Access</p>
            </div>
            <div class="flex items-center space-x-1">
              <button
                @click="toggleTheme()"
                class="p-1 rounded hover:bg-white/10"
                title="Toggle Theme"
              >
                <svg
                  x-show="theme === 'light'"
                  class="w-4 h-4"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
                  />
                </svg>
                <svg
                  x-show="theme === 'dark'"
                  class="w-4 h-4"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
                  />
                </svg>
              </button>
              <button
                @click="logout()"
                class="p-1 rounded hover:bg-white/10 text-red-300 hover:text-red-200"
                title="Logout"
              >
                <svg
                  class="w-4 h-4"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </nav>

      <!-- Main Content Area -->
      <div class="flex-1 flex flex-col">
        <!-- Top Header -->
        <header
          class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"
        >
          <div class="px-6 py-4">
            <div class="flex items-center justify-between header-content">
              <div class="flex items-center">
                <!-- Mobile Menu Button -->
                <button
                  @click="sidebarOpen = !sidebarOpen"
                  class="lg:hidden mr-4 p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-botnar-blue-500"
                >
                  <span class="sr-only">Open sidebar</span>
                  <svg
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M4 6h16M4 12h16M4 18h16"
                    />
                  </svg>
                </button>
                <div>
                  <h1
                    class="text-2xl font-bold text-gray-900 dark:text-gray-100"
                  >
                    Financial Reports
                  </h1>
                  <p class="text-gray-600 dark:text-gray-300">
                    Budget tracking and financial performance analysis
                  </p>
                </div>
              </div>
              <div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4">
                <!-- Year Selector -->
                <select
                  x-model="selectedYear"
                  @change="updateYear()"
                  class="rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-sm mobile-hide-sm"
                >
                  <option value="2025">2025</option>
                  <option value="2024">2024</option>
                  <option value="2023">2023</option>
                  <option value="all">All Years</option>
                </select>

                <!-- Currency Selector -->
                <select
                  x-model="currency"
                  @change="updateCurrency()"
                  class="rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-sm mobile-hide-sm"
                >
                  <option value="EUR">EUR (€)</option>
                  <option value="USD">USD ($)</option>
                  <option value="CHF">CHF (₣)</option>
                </select>

                <!-- Export Button -->
                <button
                  @click="exportFinancialReport()"
                  class="btn btn-primary text-sm w-full sm:w-auto flex items-center justify-center"
                >
                  <svg
                    class="w-4 h-4 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                    />
                  </svg>
                  <span class="hidden sm:inline">Export Report</span>
                  <span class="sm:hidden">Export</span>
                </button>
              </div>
            </div>
          </div>
        </header>

        <!-- Main Dashboard Content -->
        <main id="main-content" class="flex-1 p-6 overflow-y-auto">
          <!-- Financial Overview KPIs -->
          <div class="mb-8">
            <h2
              class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"
            >
              Financial Overview
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
              <!-- Total Budget -->
              <div
                class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700"
              >
                <div class="flex items-center justify-between">
                  <div>
                    <p
                      class="text-sm font-medium text-gray-600 dark:text-gray-400"
                    >
                      Total Budget
                    </p>
                    <p
                      class="text-2xl font-bold text-gray-900 dark:text-gray-100"
                      x-text="formatCurrency(financialMetrics.totalBudget)"
                    >
                      €120.5M
                    </p>
                  </div>
                  <div class="p-3 bg-blue-100 dark:bg-blue-900/20 rounded-full">
                    <svg
                      class="w-6 h-6 text-blue-600 dark:text-blue-400"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2z"
                      />
                    </svg>
                  </div>
                </div>
                <div class="mt-4 flex items-center">
                  <span
                    class="text-sm text-blue-600 dark:text-blue-400 font-medium"
                    >+12%</span
                  >
                  <span class="text-sm text-gray-500 dark:text-gray-400 ml-2"
                    >vs last year</span
                  >
                </div>
              </div>

              <!-- Total Spent -->
              <div
                class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700"
              >
                <div class="flex items-center justify-between">
                  <div>
                    <p
                      class="text-sm font-medium text-gray-600 dark:text-gray-400"
                    >
                      Total Spent
                    </p>
                    <p
                      class="text-2xl font-bold text-gray-900 dark:text-gray-100"
                      x-text="formatCurrency(financialMetrics.totalSpent)"
                    >
                      €78.3M
                    </p>
                  </div>
                  <div
                    class="p-3 bg-green-100 dark:bg-green-900/20 rounded-full"
                  >
                    <svg
                      class="w-6 h-6 text-green-600 dark:text-green-400"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 14l6-6m4.5 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm-13 6a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"
                      />
                    </svg>
                  </div>
                </div>
                <div class="mt-4">
                  <div
                    class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"
                  >
                    <div
                      class="budget-bar bg-green-600 h-2 rounded-full"
                      style="width: 65%"
                    ></div>
                  </div>
                  <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                    65% of budget utilized
                  </p>
                </div>
              </div>

              <!-- Burn Rate -->
              <div
                class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700"
              >
                <div class="flex items-center justify-between">
                  <div>
                    <p
                      class="text-sm font-medium text-gray-600 dark:text-gray-400"
                    >
                      Monthly Burn Rate
                    </p>
                    <p
                      class="text-2xl font-bold text-gray-900 dark:text-gray-100"
                      x-text="formatCurrency(financialMetrics.burnRate)"
                    >
                      €6.5M
                    </p>
                  </div>
                  <div
                    class="p-3 bg-orange-100 dark:bg-orange-900/20 rounded-full"
                  >
                    <svg
                      class="w-6 h-6 text-orange-600 dark:text-orange-400"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                      />
                    </svg>
                  </div>
                </div>
                <div class="mt-4 flex items-center">
                  <span
                    class="text-sm text-orange-600 dark:text-orange-400 font-medium"
                    >-8%</span
                  >
                  <span class="text-sm text-gray-500 dark:text-gray-400 ml-2"
                    >efficiency gain</span
                  >
                </div>
              </div>

              <!-- ROI -->
              <div
                class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700"
              >
                <div class="flex items-center justify-between">
                  <div>
                    <p
                      class="text-sm font-medium text-gray-600 dark:text-gray-400"
                    >
                      Return on Investment
                    </p>
                    <p
                      class="text-2xl font-bold text-gray-900 dark:text-gray-100"
                      x-text="financialMetrics.roi + '%'"
                    >
                      324%
                    </p>
                  </div>
                  <div
                    class="p-3 bg-purple-100 dark:bg-purple-900/20 rounded-full"
                  >
                    <svg
                      class="w-6 h-6 text-purple-600 dark:text-purple-400"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"
                      />
                    </svg>
                  </div>
                </div>
                <div class="mt-4 flex items-center">
                  <span
                    class="text-sm text-purple-600 dark:text-purple-400 font-medium"
                    >+42%</span
                  >
                  <span class="text-sm text-gray-500 dark:text-gray-400 ml-2"
                    >above target</span
                  >
                </div>
              </div>
            </div>
          </div>

          <!-- Financial Charts Section -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <!-- Budget vs Actual Chart -->
            <div
              class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700"
            >
              <div class="flex items-center justify-between mb-4">
                <h3
                  class="text-lg font-semibold text-gray-900 dark:text-gray-100"
                >
                  Budget vs Actual
                </h3>
                <div class="flex items-center space-x-2">
                  <button
                    @click="chartPeriod = 'monthly'"
                    :class="chartPeriod === 'monthly' ? 'bg-botnar-blue-100 dark:bg-botnar-blue-900/20 text-botnar-blue-700 dark:text-botnar-blue-400' : 'text-gray-500'"
                    class="px-3 py-1 rounded text-sm font-medium"
                  >
                    Monthly
                  </button>
                  <button
                    @click="chartPeriod = 'quarterly'"
                    :class="chartPeriod === 'quarterly' ? 'bg-botnar-blue-100 dark:bg-botnar-blue-900/20 text-botnar-blue-700 dark:text-botnar-blue-400' : 'text-gray-500'"
                    class="px-3 py-1 rounded text-sm font-medium"
                  >
                    Quarterly
                  </button>
                </div>
              </div>
              <div class="h-64">
                <canvas id="budgetVsActualChart"></canvas>
              </div>
            </div>

            <!-- Expense Distribution Chart -->
            <div
              class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700"
            >
              <h3
                class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"
              >
                Expense Distribution
              </h3>
              <div class="h-64">
                <canvas id="expenseDistributionChart"></canvas>
              </div>
              <div class="mt-4 grid grid-cols-2 gap-4 text-sm">
                <div class="flex items-center">
                  <div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div>
                  <span class="text-gray-600 dark:text-gray-400"
                    >Programs: 68%</span
                  >
                </div>
                <div class="flex items-center">
                  <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                  <span class="text-gray-600 dark:text-gray-400"
                    >Operations: 18%</span
                  >
                </div>
                <div class="flex items-center">
                  <div class="w-3 h-3 bg-purple-500 rounded-full mr-2"></div>
                  <span class="text-gray-600 dark:text-gray-400"
                    >Research: 10%</span
                  >
                </div>
                <div class="flex items-center">
                  <div class="w-3 h-3 bg-orange-500 rounded-full mr-2"></div>
                  <span class="text-gray-600 dark:text-gray-400"
                    >Admin: 4%</span
                  >
                </div>
              </div>
            </div>
          </div>

          <!-- Budget Allocation by Program -->
          <div
            class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700 mb-8"
          >
            <div class="flex items-center justify-between mb-6">
              <h3
                class="text-lg font-semibold text-gray-900 dark:text-gray-100"
              >
                Budget Allocation by Program
              </h3>
              <button
                @click="toggleAllocationView()"
                class="text-sm text-botnar-blue-600 hover:text-botnar-blue-700 font-medium"
              >
                <span
                  x-text="allocationView === 'amount' ? 'Show Percentage' : 'Show Amount'"
                ></span>
              </button>
            </div>

            <div class="space-y-4">
              <!-- Digital Health Program -->
              <div class="financial-card p-5 border rounded-md">
                <div class="flex items-center justify-between mb-2">
                  <div class="flex items-center">
                    <div
                      class="w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center mr-3"
                    >
                      <svg
                        class="w-5 h-5 text-blue-600 dark:text-blue-400"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"
                        />
                      </svg>
                    </div>
                    <div class="">
                      <h4
                        class="font-semibold text-gray-900 dark:text-gray-100"
                      >
                        Digital Health Programs
                      </h4>
                      <p class="text-sm text-gray-600 dark:text-gray-400">
                        Technology-enabled healthcare initiatives
                      </p>
                    </div>
                  </div>
                  <div class="text-right">
                    <p
                      class="text-xl font-bold text-gray-900 dark:text-gray-100"
                    >
                      €45.8M
                    </p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">
                      38% of total
                    </p>
                  </div>
                </div>
                <div
                  class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3"
                >
                  <div
                    class="bg-blue-600 h-3 rounded-full relative"
                    style="width: 76%"
                  >
                    <span
                      class="absolute right-2 top-0 text-xs text-white font-medium leading-3"
                      >76%</span
                    >
                  </div>
                </div>
                <div
                  class="mt-2 flex justify-between text-sm text-gray-600 dark:text-gray-400"
                >
                  <span>€34.8M spent</span>
                  <span>€11.0M remaining</span>
                </div>
              </div>

              <!-- Education Technology -->
              <div class="financial-card p-5 border rounded-md">
                <div class="flex items-center justify-between mb-2">
                  <div class="flex items-center">
                    <div
                      class="w-10 h-10 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center mr-3"
                    >
                      <svg
                        class="w-5 h-5 text-green-600 dark:text-green-400"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
                        />
                      </svg>
                    </div>
                    <div>
                      <h4
                        class="font-semibold text-gray-900 dark:text-gray-100"
                      >
                        Education Technology
                      </h4>
                      <p class="text-sm text-gray-600 dark:text-gray-400">
                        Digital learning and skills development
                      </p>
                    </div>
                  </div>
                  <div class="text-right">
                    <p
                      class="text-xl font-bold text-gray-900 dark:text-gray-100"
                    >
                      €32.5M
                    </p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">
                      27% of total
                    </p>
                  </div>
                </div>
                <div
                  class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3"
                >
                  <div
                    class="bg-green-600 h-3 rounded-full relative"
                    style="width: 62%"
                  >
                    <span
                      class="absolute right-2 top-0 text-xs text-white font-medium leading-3"
                      >62%</span
                    >
                  </div>
                </div>
                <div
                  class="mt-2 flex justify-between text-sm text-gray-600 dark:text-gray-400"
                >
                  <span>€20.2M spent</span>
                  <span>€12.3M remaining</span>
                </div>
              </div>

              <!-- Innovation Hub -->
              <div class="financial-card p-5 border rounded-md">
                <div class="flex items-center justify-between mb-2">
                  <div class="flex items-center">
                    <div
                      class="w-10 h-10 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center mr-3"
                    >
                      <svg
                        class="w-5 h-5 text-purple-600 dark:text-purple-400"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M13 10V3L4 14h7v7l9-11h-7z"
                        />
                      </svg>
                    </div>
                    <div>
                      <h4
                        class="font-semibold text-gray-900 dark:text-gray-100"
                      >
                        Innovation Hub
                      </h4>
                      <p class="text-sm text-gray-600 dark:text-gray-400">
                        AI and emerging technology research
                      </p>
                    </div>
                  </div>
                  <div class="text-right">
                    <p
                      class="text-xl font-bold text-gray-900 dark:text-gray-100"
                    >
                      €24.2M
                    </p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">
                      20% of total
                    </p>
                  </div>
                </div>
                <div
                  class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3"
                >
                  <div
                    class="bg-purple-600 h-3 rounded-full relative"
                    style="width: 54%"
                  >
                    <span
                      class="absolute right-2 top-0 text-xs text-white font-medium leading-3"
                      >54%</span
                    >
                  </div>
                </div>
                <div
                  class="mt-2 flex justify-between text-sm text-gray-600 dark:text-gray-400"
                >
                  <span>€13.1M spent</span>
                  <span>€11.1M remaining</span>
                </div>
              </div>

              <!-- Urban Development -->
              <div class="financial-card p-5 border rounded-md">
                <div class="flex items-center justify-between mb-2">
                  <div class="flex items-center">
                    <div
                      class="w-10 h-10 bg-orange-100 dark:bg-orange-900/20 rounded-lg flex items-center justify-center mr-3"
                    >
                      <svg
                        class="w-5 h-5 text-orange-600 dark:text-orange-400"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
                        />
                      </svg>
                    </div>
                    <div>
                      <h4
                        class="font-semibold text-gray-900 dark:text-gray-100"
                      >
                        Urban Development
                      </h4>
                      <p class="text-sm text-gray-600 dark:text-gray-400">
                        Smart city and sustainable infrastructure
                      </p>
                    </div>
                  </div>
                  <div class="text-right">
                    <p
                      class="text-xl font-bold text-gray-900 dark:text-gray-100"
                    >
                      €18.0M
                    </p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">
                      15% of total
                    </p>
                  </div>
                </div>
                <div
                  class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3"
                >
                  <div
                    class="bg-orange-600 h-3 rounded-full relative"
                    style="width: 71%"
                  >
                    <span
                      class="absolute right-2 top-0 text-xs text-white font-medium leading-3"
                      >71%</span
                    >
                  </div>
                </div>
                <div
                  class="mt-2 flex justify-between text-sm text-gray-600 dark:text-gray-400"
                >
                  <span>€12.8M spent</span>
                  <span>€5.2M remaining</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Recent Transactions -->
          <div
            class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700 mb-8"
          >
            <div class="flex items-center justify-between mb-6">
              <h3
                class="text-lg font-semibold text-gray-900 dark:text-gray-100"
              >
                Recent Transactions
              </h3>
              <button
                @click="viewAllTransactions()"
                class="text-sm text-botnar-blue-600 hover:text-botnar-blue-700 font-medium"
              >
                View All
              </button>
            </div>

            <div class="overflow-x-auto">
              <table class="min-w-full">
                <thead>
                  <tr class="border-b border-gray-200 dark:border-gray-700">
                    <th
                      class="text-left py-3 px-4 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                    >
                      Date
                    </th>
                    <th
                      class="text-left py-3 px-4 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                    >
                      Description
                    </th>
                    <th
                      class="text-left py-3 px-4 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                    >
                      Program
                    </th>
                    <th
                      class="text-left py-3 px-4 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                    >
                      Category
                    </th>
                    <th
                      class="text-right py-3 px-4 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                    >
                      Amount
                    </th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                  <tr class="expense-row">
                    <td
                      class="py-4 px-4 text-sm text-gray-900 dark:text-gray-100"
                    >
                      2025-01-03
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-gray-900 dark:text-gray-100"
                    >
                      Grant payment - Kenya Health Partners
                    </td>
                    <td class="py-4 px-4">
                      <span
                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"
                      >
                        Digital Health
                      </span>
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-gray-600 dark:text-gray-400"
                    >
                      Grant Payment
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-right font-medium text-gray-900 dark:text-gray-100"
                    >
                      €2,450,000
                    </td>
                  </tr>
                  <tr class="expense-row">
                    <td
                      class="py-4 px-4 text-sm text-gray-900 dark:text-gray-100"
                    >
                      2025-01-02
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-gray-900 dark:text-gray-100"
                    >
                      Technology infrastructure upgrade
                    </td>
                    <td class="py-4 px-4">
                      <span
                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400"
                      >
                        Innovation Hub
                      </span>
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-gray-600 dark:text-gray-400"
                    >
                      Infrastructure
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-right font-medium text-gray-900 dark:text-gray-100"
                    >
                      €328,500
                    </td>
                  </tr>
                  <tr class="expense-row">
                    <td
                      class="py-4 px-4 text-sm text-gray-900 dark:text-gray-100"
                    >
                      2025-01-02
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-gray-900 dark:text-gray-100"
                    >
                      Research partnership - MIT Lab
                    </td>
                    <td class="py-4 px-4">
                      <span
                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"
                      >
                        Education Tech
                      </span>
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-gray-600 dark:text-gray-400"
                    >
                      Research
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-right font-medium text-gray-900 dark:text-gray-100"
                    >
                      €875,000
                    </td>
                  </tr>
                  <tr class="expense-row">
                    <td
                      class="py-4 px-4 text-sm text-gray-900 dark:text-gray-100"
                    >
                      2025-01-01
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-gray-900 dark:text-gray-100"
                    >
                      Monthly operational expenses
                    </td>
                    <td class="py-4 px-4">
                      <span
                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"
                      >
                        Operations
                      </span>
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-gray-600 dark:text-gray-400"
                    >
                      Operating Costs
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-right font-medium text-gray-900 dark:text-gray-100"
                    >
                      €156,800
                    </td>
                  </tr>
                  <tr class="expense-row">
                    <td
                      class="py-4 px-4 text-sm text-gray-900 dark:text-gray-100"
                    >
                      2024-12-31
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-gray-900 dark:text-gray-100"
                    >
                      Smart city pilot - Barcelona
                    </td>
                    <td class="py-4 px-4">
                      <span
                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400"
                      >
                        Urban Dev
                      </span>
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-gray-600 dark:text-gray-400"
                    >
                      Pilot Program
                    </td>
                    <td
                      class="py-4 px-4 text-sm text-right font-medium text-gray-900 dark:text-gray-100"
                    >
                      €1,225,000
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Financial Health Indicators -->
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Cost Efficiency -->
            <div
              class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700"
            >
              <h3
                class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"
              >
                Cost Efficiency
              </h3>
              <div class="space-y-4">
                <div class="flex items-center justify-between">
                  <span class="text-sm text-gray-600 dark:text-gray-400"
                    >Administrative Ratio</span
                  >
                  <span
                    class="text-sm font-semibold text-green-600 dark:text-green-400"
                    >4%</span
                  >
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-sm text-gray-600 dark:text-gray-400"
                    >Program Efficiency</span
                  >
                  <span
                    class="text-sm font-semibold text-green-600 dark:text-green-400"
                    >92%</span
                  >
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-sm text-gray-600 dark:text-gray-400"
                    >Cost per Beneficiary</span
                  >
                  <span
                    class="text-sm font-semibold text-gray-900 dark:text-gray-100"
                    >€28</span
                  >
                </div>
                <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                  <p class="text-xs text-gray-500 dark:text-gray-400">
                    Efficiency metrics are 15% better than sector average
                  </p>
                </div>
              </div>
            </div>

            <!-- Funding Status -->
            <div
              class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700"
            >
              <h3
                class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"
              >
                Funding Status
              </h3>
              <div class="space-y-4">
                <div class="flex items-center justify-between">
                  <span class="text-sm text-gray-600 dark:text-gray-400"
                    >Confirmed Funding</span
                  >
                  <span
                    class="text-sm font-semibold text-gray-900 dark:text-gray-100"
                    >€142.5M</span
                  >
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-sm text-gray-600 dark:text-gray-400"
                    >Pending Commitments</span
                  >
                  <span
                    class="text-sm font-semibold text-orange-600 dark:text-orange-400"
                    >€18.3M</span
                  >
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-sm text-gray-600 dark:text-gray-400"
                    >Funding Coverage</span
                  >
                  <span
                    class="text-sm font-semibold text-green-600 dark:text-green-400"
                    >118%</span
                  >
                </div>
                <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                  <p class="text-xs text-gray-500 dark:text-gray-400">
                    Next funding round scheduled for Q2 2025
                  </p>
                </div>
              </div>
            </div>

            <!-- Risk Indicators -->
            <div
              class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700"
            >
              <h3
                class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"
              >
                Risk Indicators
              </h3>
              <div class="space-y-4">
                <div class="flex items-center justify-between">
                  <span class="text-sm text-gray-600 dark:text-gray-400"
                    >Cash Runway</span
                  >
                  <span
                    class="text-sm font-semibold text-green-600 dark:text-green-400"
                    >18 months</span
                  >
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-sm text-gray-600 dark:text-gray-400"
                    >Budget Variance</span
                  >
                  <span
                    class="text-sm font-semibold text-yellow-600 dark:text-yellow-400"
                    >-3%</span
                  >
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-sm text-gray-600 dark:text-gray-400"
                    >Risk Score</span
                  >
                  <span
                    class="text-sm font-semibold text-green-600 dark:text-green-400"
                    >Low</span
                  >
                </div>
                <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                  <p class="text-xs text-gray-500 dark:text-gray-400">
                    All financial health indicators within target range
                  </p>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <script>
      function financialReports() {
        return {
          currentPage: "financial-reports",
          sidebarOpen: false,
          theme: localStorage.getItem("theme") || "light",
          selectedYear: "2025",
          currency: "EUR",
          chartPeriod: "monthly",
          allocationView: "amount",
          financialMetrics: {
            totalBudget: 120500000,
            totalSpent: 78300000,
            burnRate: 6500000,
            roi: 324,
          },
          performanceMetrics: {
            loadTime: 0,
            chartRenderTime: 0,
          },
          charts: {
            budgetVsActual: null,
            expenseDistribution: null,
          },

          async init() {
            const startTime = performance.now();

            this.setTheme(this.theme);

            // Initialize charts after DOM is ready
            this.$nextTick(() => {
              this.initCharts();
            });

            this.performanceMetrics.loadTime = performance.now() - startTime;
            console.log(
              `Financial Reports loaded in ${this.performanceMetrics.loadTime.toFixed(
                2
              )}ms`
            );
          },

          navigateTo(page) {
            this.currentPage = page;
            // Close sidebar on mobile after navigation
            this.sidebarOpen = false;
            console.log(`Navigate to: ${page}`);
            this.showNotification(`Navigating to ${page.replace("-", " ")}...`);
          },

          toggleTheme() {
            this.theme = this.theme === "light" ? "dark" : "light";
            this.setTheme(this.theme);
            localStorage.setItem("theme", this.theme);
          },

          setTheme(theme) {
            if (theme === "dark") {
              document.documentElement.classList.add("dark");
            } else {
              document.documentElement.classList.remove("dark");
            }
          },

          updateYear() {
            this.showNotification(
              `Updated to ${this.selectedYear} financial data`
            );
            this.refreshCharts();
          },

          updateCurrency() {
            this.showNotification(`Currency changed to ${this.currency}`);
            // In a real app, this would recalculate all values
          },

          toggleAllocationView() {
            this.allocationView =
              this.allocationView === "amount" ? "percentage" : "amount";
          },

          refreshCharts() {
            // Simulate chart data update
            if (this.charts.budgetVsActual) {
              this.charts.budgetVsActual.update();
            }
            if (this.charts.expenseDistribution) {
              this.charts.expenseDistribution.update();
            }
          },

          exportFinancialReport() {
            this.showNotification("Generating financial report...", "info");

            // Simulate export process
            setTimeout(() => {
              this.showNotification(
                "Financial report exported successfully!",
                "success"
              );
            }, 2000);
          },

          viewAllTransactions() {
            this.showNotification(
              "Opening full transaction history...",
              "info"
            );
          },

          formatCurrency(value) {
            const currencySymbols = {
              EUR: "€",
              USD: "$",
              CHF: "₣",
            };
            const symbol = currencySymbols[this.currency] || "€";

            if (value >= 1000000) {
              return `${symbol}${(value / 1000000).toFixed(1)}M`;
            } else if (value >= 1000) {
              return `${symbol}${(value / 1000).toFixed(0)}K`;
            }
            return `${symbol}${value.toFixed(0)}`;
          },

          logout() {
            this.showNotification("Logging out...", "info");
            // In a real application, this would handle authentication logout
            setTimeout(() => {
              // Redirect to login page
              window.location.href = "../auth/login.html";
            }, 1000);
          },

          showNotification(message, type = "info") {
            const notification = document.createElement("div");
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ${
              type === "success"
                ? "bg-green-500 text-white"
                : type === "error"
                ? "bg-red-500 text-white"
                : "bg-blue-500 text-white"
            }`;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
              notification.remove();
            }, 3000);
          },

          initCharts() {
            if (!window.chartInitializer) {
              console.error("Chart initializer not available");
              return;
            }

            // Define chart configurations
            const chartConfigs = {
              budgetVsActualChart: {
                type: "bar",
                data: {
                  labels: [
                    "Jan",
                    "Feb",
                    "Mar",
                    "Apr",
                    "May",
                    "Jun",
                    "Jul",
                    "Aug",
                    "Sep",
                    "Oct",
                    "Nov",
                    "Dec",
                  ],
                  datasets: [
                    {
                      label: "Budget",
                      data: [
                        10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0,
                        10.0, 10.0, 10.5,
                      ],
                      backgroundColor: "rgba(0, 102, 204, 0.5)",
                      borderColor: "#0066CC",
                      borderWidth: 1,
                    },
                    {
                      label: "Actual",
                      data: [9.2, 9.8, 8.5, 9.5, 10.2, 9.6, 8.8, 0, 0, 0, 0, 0],
                      backgroundColor: "rgba(52, 211, 153, 0.5)",
                      borderColor: "#34D399",
                      borderWidth: 1,
                    },
                  ],
                },
                options: {
                  responsive: true,
                  maintainAspectRatio: false,
                  plugins: {
                    legend: {
                      position: "top",
                    },
                  },
                  scales: {
                    y: {
                      beginAtZero: true,
                      ticks: {
                        callback: function (value) {
                          return "€" + value + "M";
                        },
                      },
                    },
                  },
                },
              },
              expenseDistributionChart: {
                type: "doughnut",
                data: {
                  labels: [
                    "Programs",
                    "Operations",
                    "Research",
                    "Administration",
                  ],
                  datasets: [
                    {
                      data: [68, 18, 10, 4],
                      backgroundColor: [
                        "#0066CC",
                        "#34D399",
                        "#A855F7",
                        "#FB923C",
                      ],
                      borderWidth: 0,
                    },
                  ],
                },
                options: {
                  responsive: true,
                  maintainAspectRatio: false,
                  plugins: {
                    legend: {
                      display: false,
                    },
                  },
                },
              },
            };

            // Initialize charts with the new system
            window.chartInitializer.initializeCharts(chartConfigs);
          },
        };
      }
    </script>
  </body>
</html>
